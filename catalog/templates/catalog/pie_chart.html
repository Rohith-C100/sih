{% extends 'base_generic.html' %}

{% block content %}
<div>
  <canvas id="myChart" style="margin-top:20vh;width:100%;max-width:500px;max-height:500px;"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const test = JSON.parse("{{data|escapejs}}");
  const labels = test.labels
const data = {
  labels: labels,
  datasets: [{
    label: 'Aggregation of each field',
    data: test.data,
    backgroundColor: [
      'rgba(255, 99, 132, 0.8)',
      'rgba(255, 159, 64, 0.8)',
      'rgba(255, 205, 86, 0.8)',
      'rgba(75, 192, 192, 0.8)',
    ],
    borderColor: [
      'rgb(255, 99, 132)',
      'rgb(255, 159, 64)',
      'rgb(255, 205, 86)',
      'rgb(75, 192, 192)',
    ],
    borderWidth: 1
  }]
};

const config = {
  type: 'bar',
  data: data,
  options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  },
};

  const myChart = new Chart(
    document.getElementById('myChart'),
    config
  );
  
</script>


{% endblock %}